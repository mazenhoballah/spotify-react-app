(this["webpackJsonpspotify-music-search-app"]=this["webpackJsonpspotify-music-search-app"]||[]).push([[0],{114:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(10),r=a.n(s),i=a(24),o=(a(84),a(13)),l=a(148),p=a.p+"static/media/spotify.8eecc546.svg",u=a.p+"static/media/spotifyBlack.2afdad89.svg",j=(a(85),a(4)),m=function(e){var t=Object(c.useState)(!1),a=Object(o.a)(t,2),n=a[0],s=a[1],r=Object({NODE_ENV:"production",PUBLIC_URL:"/spotify-react-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTHORIZE_URL:"https://accounts.spotify.com/authorize",REACT_APP_CLIENT_ID:"539b475c7e864968bb2c72ba004fe08f",REACT_APP_REDIRECT_URL:"http://localhost:3000/redirect"}),i=r.REACT_APP_CLIENT_ID,m=r.REACT_APP_AUTHORIZE_URL,d=r.REACT_APP_REDIRECT_URL,h=function(){s(!n)};return Object(j.jsx)("div",{className:"login",children:Object(j.jsxs)(l.a,{variant:"contained",color:"primary",className:"btn-color",onClick:function(){window.location="".concat(m,"?client_id=").concat(i,"&redirect_uri=").concat(d,"&response_type=token&show_dialog=true")},onMouseEnter:h,onMouseLeave:h,children:["Login using Spotify",n?Object(j.jsx)("img",{src:u,alt:"",className:"icon"}):Object(j.jsx)("img",{src:p,alt:"",className:"icon"})]})})},d=a(39),h=a(27),b=a(61),O=a(60),f=a(58),x=a.n(f),v=a(40),g=a.n(v),y=function(){try{var e=JSON.parse(localStorage.getItem("params"));e&&(g.a.defaults.headers.common.Authorization="Bearer ".concat(e.access_token))}catch(t){console.log("Error setting auth",t)}},_=function(e){Object(b.a)(a,e);var t=Object(O.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.setExpiryTime,e.history),a=e.location;try{if(x.a.isEmpty(a.hash))return t.push("/search");var c=a.hash.slice(1).split("&").reduce((function(e,t){var a=t.split("="),c=Object(o.a)(a,2),n=c[0],s=c[1];return e[n]=s,e}),{}),n=(new Date).getTime()+1e3*c.expires_in;localStorage.setItem("params",JSON.stringify(c)),localStorage.setItem("expiry_time",n),t.push("/search")}catch(s){t.push("/")}}},{key:"render",value:function(){return null}}]),a}(n.a.Component),E=a(23),N=a.n(E),R=a(29),S=a(160),T=function(){var e=Object(R.a)(N.a.mark((function e(t,a){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(),e.next=3,g.a.get(t,a);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),w=(a(114),a(154)),A=a(155),C=a(157),I=a(156),k=a(158),P=a(152),L=a(153),D=a(161),U=Object(P.a)({root:{width:270,marginTop:"40px",marginLeft:"15px",marginRight:"15px",height:400},media:{height:240,width:300}}),W=function(e){var t=U(),a=Object(c.useState)(""),n=Object(o.a)(a,2),s=n[0],r=n[1],l=Object(c.useState)({}),p=Object(o.a)(l,2),u=p[0],m=p[1],d=Object(c.useState)(""),h=Object(o.a)(d,2),b=(h[0],h[1]),O=function(){var e=Object(R.a)(N.a.mark((function e(){var t,a,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m({}),e.prev=1,t=encodeURIComponent(s),a="https://api.spotify.com/v1/search?q=".concat(t.toLocaleUpperCase(),"&type=artist"),e.next=6,T(a);case 6:c=e.sent,m(c),console.log("results => ",c),console.log(c.artists.items[0].popularity),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){console.log("TOKEN => ",localStorage.getItem("params").split(",")[0].split(":")[1])}),[]),Object(c.useEffect)((function(){console.log("items=>",u)}),[u]),Object(c.useEffect)((function(){return""!==s.trim()?(b(""),O(),console.log(s)):b("Please enter a search term."),function(){r("")}}),[s]),Object(j.jsxs)(L.a,{maxWidth:"lg",children:[Object(j.jsx)("div",{className:"search-container",children:Object(j.jsx)("div",{children:Object(j.jsx)(S.a,{id:"outlined-search",label:"Search for an artist",type:"search",variant:"outlined",className:"search-field",onChange:function(e){var t=e.target.value;r(t)}})})}),Object(j.jsx)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",margin:"0 auto"},children:u.artists?u.artists.items.map((function(e,a){return Object(j.jsx)("div",{children:Object(j.jsx)(i.b,{to:{pathname:"/".concat(e.id,"/albums"),artistName:e.name},className:"link",children:Object(j.jsx)(w.a,{className:t.root,children:Object(j.jsxs)(A.a,{children:[e.images[0]?Object(j.jsx)(I.a,{className:t.media,image:e.images[2].url,title:e.name}):Object(j.jsx)(I.a,{className:t.media,title:e.name}),Object(j.jsxs)(C.a,{children:[Object(j.jsx)(k.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.name}),Object(j.jsx)(k.a,{variant:"body2",color:"textSecondary",component:"p",children:e.followers.total}),Object(j.jsx)(D.a,{name:"read-only",value:e.popularity/20,readOnly:!0,style:{paddingTop:"10px"}})]})]})})})},a)})):Object(j.jsx)("div",{})})]})},B=a(9),H=(a(116),a(159)),J=Object(P.a)({root:{width:270,marginTop:"40px",marginLeft:"15px",marginRight:"15px",display:"flex",flexDirection:"column"},media:{height:240,width:300}}),K=function(){var e=J(),t=Object(B.f)().artistId,a=Object(c.useState)({}),n=Object(o.a)(a,2),s=n[0],r=n[1],i=function(){var e=Object(R.a)(N.a.mark((function e(){var a,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({}),e.prev=1,a="https://api.spotify.com/v1/artists/".concat(t,"/albums"),e.next=5,T(a);case 5:c=e.sent,console.log("albums => ",c.items),r(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("ERROR=>",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){i()}),[]),Object(j.jsx)("div",{children:s.items?Object(j.jsxs)("div",{className:"title-container",children:[Object(j.jsx)(L.a,{maxWidth:"lg",children:Object(j.jsxs)("div",{className:"title",children:[Object(j.jsx)("h1",{children:s.items[0].artists[0].name}),Object(j.jsx)("h3",{children:"Albums"})]})}),Object(j.jsx)(L.a,{maxWidth:"lg",children:Object(j.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:s.items.map((function(t,a){return Object(j.jsxs)(w.a,{className:e.root,children:[Object(j.jsxs)(A.a,{className:"card-body",children:[Object(j.jsx)(I.a,{className:e.media,image:t.images[0].url}),Object(j.jsxs)(C.a,{children:[Object(j.jsx)(k.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.name}),Object(j.jsx)(k.a,{variant:"body2",color:"textSecondary",component:"p",children:t.release_date}),Object(j.jsxs)(k.a,{variant:"body2",color:"textSecondary",component:"p",children:[t.total_tracks," Tracks"]})]})]}),Object(j.jsx)(H.a,{className:"actions",children:Object(j.jsx)(l.a,{size:"small",color:"primary",href:t.external_urls.spotify,className:"link",children:"Preview on Spotify"})})]},a)}))})})]}):Object(j.jsx)("div",{})})};a(117);var z=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(B.c,{children:[Object(j.jsx)(B.a,{exact:!0,path:"/",component:m}),Object(j.jsx)(B.a,{path:"/redirect",component:_}),Object(j.jsx)(B.a,{path:"/search",component:W}),Object(j.jsx)(B.a,{path:"/:artistId/albums",component:K})]})})};r.a.render(Object(j.jsx)(i.a,{children:Object(j.jsx)(z,{})}),document.getElementById("root"))},84:function(e,t,a){},85:function(e,t,a){}},[[118,1,2]]]);
//# sourceMappingURL=main.14a2e598.chunk.js.map